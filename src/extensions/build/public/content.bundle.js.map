{"version":3,"file":"content.bundle.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://react-visualizer/./node_modules/web-vitals/dist/web-vitals.js","webpack://react-visualizer/webpack/bootstrap","webpack://react-visualizer/webpack/runtime/define property getters","webpack://react-visualizer/webpack/runtime/hasOwnProperty shorthand","webpack://react-visualizer/webpack/runtime/make namespace object","webpack://react-visualizer/./src/extensions/contentScript.js"],"sourcesContent":["var e,n,t,r,i,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),r=\"navigate\";return a>=0?r=\"back-forward-cache\":t&&(r=document.prerendering||u()>0?\"prerender\":document.wasDiscarded?\"restore\":t.type.replace(/_/g,\"-\")),{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},t||{})),r}}catch(e){}},d=function(e,n,t,r){var i,a;return function(o){n.value>=0&&(o||r)&&((a=n.value-(i||0))||void 0===i)&&(i=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){var n=function(n){\"pagehide\"!==n.type&&\"hidden\"!==document.visibilityState||e(n)};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},v=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),o((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},L=[1800,3e3],b=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"FCP\"),a=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(a.disconnect(),e.startTime<r.firstHiddenTime&&(i.value=Math.max(e.startTime-u(),0),i.entries.push(e),t(!0)))}))}));a&&(t=d(e,i,L,n.reportAllChanges),o((function(r){i=f(\"FCP\"),t=d(e,i,L,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,t(!0)}))})))}))},w=[.1,.25],S=function(e,n){n=n||{},b(v((function(){var t,r=f(\"CLS\",0),i=0,a=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=a[0],t=a[a.length-1];i&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}})),i>r.value&&(r.value=i,r.entries=a,t())},u=s(\"layout-shift\",c);u&&(t=d(e,r,w,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),o((function(){i=0,r=f(\"CLS\",0),t=d(e,r,w,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A={passive:!0,capture:!0},I=new Date,P=function(r,i){e||(e=i,n=r,t=new Date,k(removeEventListener),F())},F=function(){if(n>=0&&n<t-I){var i={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};r.forEach((function(e){e(i)})),r=[]}},M=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){P(e,n),i()},r=function(){i()},i=function(){removeEventListener(\"pointerup\",t,A),removeEventListener(\"pointercancel\",r,A)};addEventListener(\"pointerup\",t,A),addEventListener(\"pointercancel\",r,A)}(n,e):P(n,e)}},k=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,M,A)}))},D=[100,300],x=function(t,i){i=i||{},C((function(){var a,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),a(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);a=d(t,u,D,i.reportAllChanges),h&&p(v((function(){m(h.takeRecords()),h.disconnect()}))),h&&o((function(){var o;u=f(\"FID\"),a=d(t,u,D,i.reportAllChanges),r=[],n=-1,e=null,k(addEventListener),o=l,r.push(o),F()}))}))},B=0,R=1/0,H=0,N=function(e){e.forEach((function(e){e.interactionId&&(R=Math.min(R,e.interactionId),H=Math.max(H,e.interactionId),B=H?(H-R)/7+1:0)}))},O=function(){return i?B:performance.interactionCount||0},q=function(){\"interactionCount\"in performance||i||(i=s(\"event\",N,{type:\"event\",buffered:!0,durationThreshold:0}))},j=[200,500],_=0,z=function(){return O()-_},G=[],J={},K=function(e){var n=G[G.length-1],t=J[e.interactionId];if(t||G.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};J[r.id]=r,G.push(r)}G.sort((function(e,n){return n.latency-e.latency})),G.splice(10).forEach((function(e){delete J[e.id]}))}},Q=function(e,n){n=n||{},C((function(){q();var t,r=f(\"INP\"),i=function(e){e.forEach((function(e){(e.interactionId&&K(e),\"first-input\"===e.entryType)&&(!G.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&K(e))}));var n,i=(n=Math.min(G.length-1,Math.floor(z()/50)),G[n]);i&&i.latency!==r.value&&(r.value=i.latency,r.entries=i.entries,t())},a=s(\"event\",i,{durationThreshold:n.durationThreshold||40});t=d(e,r,j,n.reportAllChanges),a&&(a.observe({type:\"first-input\",buffered:!0}),p((function(){i(a.takeRecords()),r.value<0&&z()>0&&(r.value=0,r.entries=[]),t(!0)})),o((function(){G=[],_=O(),r=f(\"INP\"),t=d(e,r,j,n.reportAllChanges)})))}))},U=[2500,4e3],V={},W=function(e,n){n=n||{},C((function(){var t,r=E(),i=f(\"LCP\"),a=function(e){var n=e[e.length-1];n&&n.startTime<r.firstHiddenTime&&(i.value=Math.max(n.startTime-u(),0),i.entries=[n],t())},c=s(\"largest-contentful-paint\",a);if(c){t=d(e,i,U,n.reportAllChanges);var m=v((function(){V[i.id]||(a(c.takeRecords()),c.disconnect(),V[i.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,m,!0)})),p(m),o((function(r){i=f(\"LCP\"),t=d(e,i,U,n.reportAllChanges),l((function(){i.value=performance.now()-r.timeStamp,V[i.id]=!0,t(!0)}))}))}}))},X=[800,1800],Y=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},Z=function(e,n){n=n||{};var t=f(\"TTFB\"),r=d(e,t,X,n.reportAllChanges);Y((function(){var i=c();if(i){var a=i.responseStart;if(a<=0||a>performance.now())return;t.value=Math.max(a-u(),0),t.entries=[i],r(!0),o((function(){t=f(\"TTFB\",0),(r=d(e,t,X,n.reportAllChanges))(!0)}))}}))};export{w as CLSThresholds,L as FCPThresholds,D as FIDThresholds,j as INPThresholds,U as LCPThresholds,X as TTFBThresholds,S as getCLS,b as getFCP,x as getFID,Q as getINP,W as getLCP,Z as getTTFB,S as onCLS,b as onFCP,x as onFID,Q as onINP,W as onLCP,Z as onTTFB};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","/***\n * we are assuming webvitals package is installed from npm\n * To not use npm install:\n * <script type=\"module\">\n *   import {onCLS, onFID, onLCP} from 'https://unpkg.com/web-vitals@3?module';\n * </script>\n */\nimport { onCLS, onFID, onLCP, onFCP, onTTFB, measure } from 'web-vitals';\n//user device info\nimport { getDeviceInfo } from 'web-vitals-reporter';\n\nfunction getLane(node) {\n  const lastTwo = node.className.slice(-2);\n  const lastOne = node.className.slice(-1);\n  console.log('last two: ', lastTwo);\n  if (!isNaN(lastTwo)) {\n    console.log('s');\n    return Number(lastTwo);\n  } else if (!isNaN(lastOne)) return Number(lastOne);\n  return 0;\n}\nfunction getAttributes(node) {\n  return { type: node.className || node.nodeName, lane: getLane(node) };\n}\n\nlet coreWebVitals = {};\nfunction storeVitals() {\n  //user need to interact with the page for FID to be reported\n  onFID((metric) => {\n    coreWebVitals.fid = Math.round(metric.value * 10000) / 10000;\n    coreWebVitals.fidRating = metric.rating.toUpperCase();\n  });\n\n  //following metrics will not be reported if page was loaded in the background\n  onLCP((metric) => {\n    coreWebVitals.lcp = Math.round(metric.value * 10000) / 10000;\n    coreWebVitals.lcpRating = metric.rating.toUpperCase();\n  });\n  //CLS\n  onCLS((metric) => {\n    coreWebVitals.cls = Math.round(metric.value * 10000) / 10000;\n    coreWebVitals.clsRating = metric.rating.toUpperCase();\n  });\n  //FCP\n  onFCP((metric) => {\n    coreWebVitals.fcp = Math.round(metric.value * 10000) / 10000;\n    coreWebVitals.fcpRating = metric.rating.toUpperCase();\n  });\n  //TTFB\n  onTTFB((metric) => {\n    coreWebVitals.ttfb = Math.round(metric.value * 10000) / 10000;\n    coreWebVitals.ttfbRating = metric.rating.toUpperCase();\n  });\n  return coreWebVitals;\n}\n//storeVitals();\n\n/**\n * @param {DOM node}\n * @return {treeWalker}\n */\n\nconst createWalker = (node) =>\n  document.createTreeWalker(node, NodeFilter.SHOW_ELEMENT, walkerFilter);\n\nconst walkerFilter = {\n  acceptNode(node) {\n    if (\n      node.nodeName.toLowerCase() === 'script' ||\n      node.nodeName.toLowerCase() === 'noscript' ||\n      node.nodeName.toLowerCase() === 'link' ||\n      node.nodeName.toLowerCase() === 'style' ||\n      node.nodeName.toLowerCase() === 'img' ||\n      node.nodeName.toLowerCase() === 'iframe' ||\n      node.nodeName.toLowerCase() === 'text' ||\n      node.nodeName.toLowerCase() === 'tspan' ||\n      node.tagName.toLowerCase() == 'svg'\n    )\n      return NodeFilter.FILTER_REJECT;\n    else return NodeFilter.FILTER_ACCEPT;\n  },\n};\n\n/**\n * Take properties of a DOM node and convert them to attributes for D3Node\n * @param {DOM node} DOM node\n * @return an object representing the attributes for D3Node.\n */\n\n/**\n * Get and return the children nodes of the node corresponding to a tree walker\n * @param {treeWalker} walker\n * @return an array of D3nodes that are children of the node corresponding to the walker\n */\nfunction getChildren(walker) {\n  let d3Children = []; //declare an array of d3nodes\n  let childNode = walker.firstChild();\n\n  //find all children of walker.currentNode\n  while (childNode) {\n    //convert walker to D3node\n    let D3Node = createD3Node(walker);\n    let childWalker = createWalker(walker.currentNode);\n    //if the child node has children, recursively call the getChildren and assign the children to d3Node\n    if (childNode.children.length > 0)\n      D3Node.children = getChildren(childWalker);\n    //add the newly created D3Node to the children array\n    d3Children.push(D3Node);\n    //walker move to the next sibling and reassign the childNode to the sibling node\n    childNode = walker.nextSibling();\n  }\n\n  return d3Children;\n}\n\n/** Convert a walker to a D3 tree Node\n * @param {treeWalker} walker\n * @return {} node for D3 tree\n */\nfunction createD3Node(walker) {\n  //get the node corresponding to the walker object\n  const node = walker.currentNode;\n  //initialize and a new D3Node that will be returned later\n  let D3Node = {};\n  D3Node.name = node.nodeName;\n  D3Node.attributes = getAttributes(node);\n  return D3Node;\n}\n\n/** Traverse the DOM with the initial tree walker\n * @param {treeWalker} walker\n * @returns {} the root node of d3 Tree\n */\nfunction grabData() {\n  const root = document.body;\n  const walker = document.createTreeWalker(\n    root,\n    NodeFilter.SHOW_ELEMENT,\n    walkerFilter\n  );\n  const d3Node = createD3Node(walker);\n  if (walker.currentNode.children.length > 0)\n    d3Node.children = getChildren(walker);\n  return d3Node;\n}\n\nlet d3Tree = grabData();\nchrome.runtime.sendMessage({ tree: d3Tree });\n\nconst grabTree = new MutationObserver(() => {\n  let updatedTree = grabData();\n  chrome.runtime.sendMessage({ nestedObject: updatedTree });\n  let updatedVitals = storeVitals();\n  chrome.runtime.sendMessage({ storedVitals: updatedVitals });\n});\nconst observerConfig = {\n  attributes: true,\n  childList: true,\n  subtree: true,\n};\ngrabTree.observe(document.documentElement, observerConfig);\n\n// const port = chrome.runtime.connect({ name: 'knockknock' });\n// port.postMessage({ joke: 'Knock knock' });\n// console.log(port.name);\n// port.onMessage.addListener(function (msg) {\n//   console.log('msg in content.js', msg);\n//   if (msg.question === \"Who's there?\")\n//     port.postMessage({ treeData: treeData4 });\n//   else if (msg.question === 'Madame who?')\n//     port.postMessage({ answer: 'Madame... Bovary' });\n// });\n"],"names":[],"sourceRoot":""}